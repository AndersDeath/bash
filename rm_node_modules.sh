#!/bin/bash

# Check if a path is provided
if [ -z "$1" ]; then
  echo "Usage: $0 <path>"
  exit 1
fi

TARGET_PATH="$1"

# Check if the provided path exists and is a directory
if [ ! -d "$TARGET_PATH" ]; then
  echo "Error: The provided path '$TARGET_PATH' does not exist or is not a directory."
  exit 1
fi

# Find and remove all node_modules directories
echo "Searching for node_modules directories in '$TARGET_PATH'..."
find "$TARGET_PATH" -type d -name "node_modules" -prune -exec rm -rf {} +

echo "All node_modules folders in '$TARGET_PATH' have been removed."